<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Checkout form</title>
  
  
  
      <link rel="stylesheet" href="style.css">

  
</head>

<body onload="loadPrice()">





<script language = "javascript" type = "text/javascript">
         <!-- 
         //Browser Support Code
         function loadPrice()
         {
          //localStorage.setItem('amount','100');

          document.getElementById('price').innerHTML=localStorage.getItem('amount');
         }
         function ajaxFunction() {
            var ajaxRequest;  // The variable that makes Ajax possible!
            
            try {        
               // Opera 8.0+, Firefox, Safari
               ajaxRequest = new XMLHttpRequest();
            } catch (e) {
               
               // Internet Explorer Browsers
               try {
                  ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
               } catch (e) {
                  
                  try {
                     ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                  } catch (e) {
                     // Something went wrong
                     alert("Your browser broke!");
                     return false;
                  }
               }
            }
            
            // Create a function that will receive data
            // sent from the server and will update
            // div section in the same page.
            ajaxRequest.onreadystatechange = function() {
            
               if(ajaxRequest.readyState == 4) {
                  var ajaxDisplay = document.getElementById('ajaxDiv');
				  data = ajaxRequest.responseText.split(',');
                  ajaxDisplay.innerHTML = data[1];
				  if(data[1] == "successful!")
				  {
					alert("Payment Successful!");
					localStorage['transid'] = data[0];
					window.location.href="http://localhost/seproject/receipt.html";
				  }
               }
            }
            
            // Now get the value from user and pass it to
            // server script.
            var name = document.getElementById('name').value;
            var month = document.getElementById('month').value;
            var year = document.getElementById('year').value;
	    var card_num = document.getElementById('card_num').value;
	    var cvv = document.getElementById('cvv').value;
            ajaxRequest.open("GET", "action.php" +"?name="+name+"&month="+month+"&year="+year+"&card_num="+card_num+"&cvv="+cvv+"&amount="+localStorage.getItem('amount'), true);
            ajaxRequest.send(null); 
         }
         //-->
      </script>	







  <!-- heading starts here -->
<hgroup class="heading">
<h1 class="major">Checkout Form </h1>
</hgroup> 
<!-- end heading -->

<!-- main content --> 

<form class="checkout">
    <div class="checkout-header">
      <h1 class="checkout-title">
        Checkout
        <span id="price" class="checkout-price"></span>
      </h1>
    </div>
    <p>
      <input type="text" class="checkout-input checkout-name" id="name" name="name" placeholder="Your name" autofocus>
      <input type="text" class="checkout-input checkout-exp" id="month" name="month" placeholder="MM">
      <input type="text" class="checkout-input checkout-exp" id="year" name="year" placeholder="YY">
    </p>
    <p>
      <input type="text" class="checkout-input checkout-card" id="card_num" name="card_num" placeholder="4111 1111 1111 1111">
      <input type="text" class="checkout-input checkout-cvc" id="cvv" name="cvv" placeholder="CVV">
    </p>
    <p>
      <input type="button" onclick = 'ajaxFunction()' value="Purchase" class="checkout-btn">
    </p>
  </form>
	<center> <div id = 'ajaxDiv'></div></center>
<!-- end of main cotnent -->

<!-- about footer starts here -->
  <div class="about">
    <p class="about-links">
	<centre>      
	<a href="" target="_blank" title="HAVING PROBLEMS WITH THE PAYMENT? Contact Us">Campus Mart</a>
     	 </centre>
    </p>
    <p class="about-author">
      &copy; 2017 <a href="" target="_blank">PES Batch 2017</a> -
      <a href="" target="_blank">SSL Secure</a><br>
    </p>
  </div>
<!-- about footer ends here -->
  


</body>
</html>
